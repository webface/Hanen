<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Rcwd Upload for Advanced Custom Fields WP Plugin</title>
    
    <link rel="shortcut icon" href="http://www.cantarano.com/envato/assets/images/favicon.png">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/default.min.css">
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <link href="style/css/style.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>     
    <script>
	
	$(document).ready(function(){
			
		//hljs.configure({useBR: true});
		
		$('pre div.iscode').each(function( i, block ){
			
			hljs.highlightBlock(block);
			
		});

		$('#main-navbar li a').on('click', function(e){
			
			if($(this).attr('href').substr( 0,1 ) == '#'){
				
				$(".navbar-collapse").collapse('hide');
				
			}
			
		});
				
	});    
    
    </script>    

</head>
<body data-spy="scroll" data-target="#nav-wrapper">
	<div class="container">
    	<div class="row">
            <aside class="col-sm-2">
                <div id="fixed-wrapper" data-spy="affiffx" data-offset-bottom="200">
                    <nav id="nav-wrapper" class="navbar navbar-inverse navbar-default">

                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar" aria-expanded="false">
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                            </button>
                            <img src="http://www.cantarano.com/envato/assets/images/rcwd.jpg" alt="" height="50px" class="visible-xs">
							<h3 id="toc">Table of Contents</h3>
                        </div>
 
						<div class="collapse navbar-collapse" id="main-navbar">                        
                            <ul id="menu" class="nav  navbar-nav">
                                <li><a href="#intro">Intro</a></li>
                                <li><a href="#compatibility">ACF Compatibility</a></li>
                                <li><a href="#install">Install</a></li>
                                <li><a href="#howtouse">How to use</a></li>
                                <li><a href="#aaf">Actions & Filters</a></li>
                                <li><a href="#jst">JS triggers</a></li>
                                <li><a href="#support">Support</a></li>
                                <li><a href="#faq">FAQ</a></li>
                                <li><a href="#updates">Updates</a></li>
                            </ul>
                        </div> 
                                               
                    </nav>  
                </div>              
            </aside>
            <div id="content-wrapper" class="col-sm-10">
                <div id="content-inner-wrapper">
                    <h1 id="maintitle">Rcwd Upload for Advanced Custom Fields WP Plugin</h1>
                    <div id="intro-block">
                        <div class="row">
                            <div class="col-md-6">
                                <div id="intro-block-1">
                                    <strong>
                                    Created: 29/06/2013<br>
                                    Last update: 10/08/2016 <br>                        
                                    By: Roberto Cantarano<br>
                                    Website: <a href="http://www.cantarano.com">http://www.cantarano.com</a><br>
                                    Twitter: <a href="https://twitter.com/robertowd">https://twitter.com/robertowd</a><br>
                                    Facebook: <a href="https://www.facebook.com/rc.webdesigner">https://facebook.com/rc.webdesigner</a><br>
                                    </strong>
                                </div>
                            </div>	
                        
                            <div class="col-md-6">
                                 <div id="intro-block-2">
                               		<p class="prepend-top append-0">Thank you for purchasing my add-on.<br>If you have any questions that are beyond the scope of this help file, please send me an email at <a href="mailto:roberto@cantarano.com">roberto@cantarano.com</a>.</p>
                            	</div>
                            </div>
                            
                        </div>
                    </div>
                        
                    <h3 id="intro"><strong>Intro</strong></h3>
                
                    <p>This add-on extends the functionality of the free Wordpress plugin <a href="http://www.advancedcustomfields.com" target="_blank">Advanced Custom Field</a>.</p>
                    <p>Il allows to add a new single file upload field that is external to the WP media  core.</p>
                    <p>Yes, you will not find the loaded file inside the media manager, also it uses a different folder for every location (page, post, taxonomy, user, options page etc.) and inside any folder all the files are further divided in subfolders by the id ( post id, user id etc.).</p>
 
                     <h4>New Features!</h4>
                    <p>
                   	<img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> <strong>now the file field value is editable in admin entry also</strong> (thanks to the new GF API)
                    </p>                      
                    <h4>Features</h4>
                    <p>
                   	<img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> <strong>New JS trigger to customize upload filters</strong>  ( acfrcwdupload_filters and acfrcwdupload_object). See F.A.Q. section<br />  
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> <strong>Upload in chunks (by using the filter acf_rcwdupload_chunks)</strong><br />  
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> <strong>Settings for IMAGE THUMB BEFORE/AFTER UPLOAD</strong><br />                      
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> It works with <strong>ACF 5 PRO</strong> version<br />  
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Support for <strong>image preview</strong> before upload with size settings! (for all modern browsers)<br />  
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Option for <strong>autoupload</strong> after file selection<br />                      
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Options for resizing (clientside and serverside)<br />
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Options for filtering the allowed extensions<br />
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Tested with repeater fields and flexible-content fields<br />
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Support for drag&amp;drop <br />
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> It works on every ACF location (page, post, user, options page, category etc.)<br />
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> (optional) Hidden file path with the (optional) possibility to treat the file as an attachment (force download)<br />
                    <img src="http://www.cantarano.com/envato/assets/images/feature.png" alt="" /> Language translation for english and italian<br />
                    </p>
                  
                    <hr>
                    
                    <h3 id="compatibility"><strong>ACF compatibility</strong></h3>
                    <p>This add-on will work with V3 to V5</p>
        			
                    <hr>
               
                    <h3 id="install"><strong>Installation</strong></h3>
                
                    <p>This add-on can be treated as both a WP plugin and a theme include.</p>
                    
                    <h4>STEP 1</h4>
                    
                    <h5>**Install as Plugin**</h5>
                    
                    <ul>
                        <li>Copy the '<strong>acf-rcwdupload</strong>' folder into your plugins folder;</li>
                        <li>Activate the plugin via the Plugins admin page.</li>
                    </ul>
                    
                    <h5>**Include within theme**</h5>
                    
                    <ul>
                        <li>Copy the '<strong>acf-rcwdupload</strong>' folder into your theme folder (can use sub folders).<br>
                        You can place the folder anywhere inside the '<strong>wp-content</strong>' directory;</li>
                        <li>Edit your <strong>functions.php</strong> file and add the code below (Make sure the path is correct to include the file).</li>
                    </ul>
                    
                    <div class="code">
                        add_action('acf/register_fields', 'my_register_fields');<br><br>
                        
                        function my_register_fields()<br>
                        {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;include_once('acf-rcwdupload/acf-rcwdupload-v4.php'); // change it with acf-rcwdupload-v3.php if you use ACF version 3<br>
                        }
                    </div>
         
                    <h4>STEP 2</h4>
                    
                    <p>After the installation, you have to fill a form to verify the purchase: you will find a new submenu page in your Advanced Custom Fields menu.<br>
                    Click on "Rcwd Upload settings" and fill the fields (under each field you will find instructions on how to get the info you need).</p>
                    <img src="http://www.cantarano.com/envato/items/rcwdupload/pv.jpg" style="display:block;margin:10px;">
                    <hr>
         
                    <h3 id="howtouse"><strong>How to use</strong></h3>
        
                    <p>Rcwd upload output an array, this array contains the following values:</p>
                    <ul>
                      <li>['file'] =&gt; The filename (eg. lorem.jpg)</li>
                      <li>['size'] =&gt; The size of the file (eg. 763 kB)</li>
                      <li>['width'] =&gt; The width of the image(eg. 1024); &larr; only if file is image</li>
                      <li>['height'] =&gt;The height of the image(eg. 768); &larr; only if file is image</li>
                      <li>['file'] =&gt; The filename (eg. lorem.jpg)</li>
                      <li>['url'] =&gt; The url of the file (eg. http://www.cantarano.com/wp-content/acfrcwduploads/field_51d19553a578e/post_2/lorem.jpg)</li>
                      <li>['purl'] =&gt;Same of above but with hidden path and 2 options:
                        <ul>
                          <li>['purl']['inline'] =&gt; http://www.cantarano.com//acfrcwdup/0/25753/51d19553a578e/p/2/lorem.jpg</li>
                          
                          <li>['purl']['attach'] =&gt; Same of above but will force the download</li>
                        </ul>
                      </li>
                  </ul>
                    <p>You can call the value using a function of the mail ACF plugin:</p>
                    <div class="code">$field = get_field($field_name, $post_id, $format_value);</div>
                    <p><strong>IMPORTANT</strong>: Don't forget to update your permalink structure after add the new rules by going to <strong>BACKOFFICE > SETTINGS > PERMALINK</strong> </p>
                    
                    <hr>

                  	<h3 id="aaf"><strong>Actions & Filters</strong></h3>
                    <p><strong>FILTERS</strong></p>
                    <ul>
                        <li>
                        	<strong>acf_rcwdupload_thumb_force_http</strong> - defaults to false<br>
        					This filter force the preview thumb to be under http protocol also when https is active.<br>
                            Why this?<br>
                            Some servers that run websites in https have problems (don't know why, probably is something security related) to show the generated thumb with the same protocol.
        					<pre class="isprecode"><div class="iscode php">
                            
function acf_rcwdupload_thumb_force_http( $force, $field ){

    return true;

}

add_filter( 'acf_rcwdupload_thumb_force_http', 'acf_rcwdupload_thumb_force_http', 10, 2 );
        					</div></pre>
        
                              <br>
                        </li>            
                        <li>
                        	<strong>acf_rcwdupload_chunks</strong> - defaults to 0<br>
                            This filter  set the limit of fields that user can create with the repeater button.<br>
                            The upload script has a built-in support for chunking, although it is <strong>disabled by default</strong>.<br>
                          	What happens when it is activated, is that instead of sending a complete file, the script splits it into chunks of predefined size and uploads them one by one to be reassembled back to a complete file on a server-side.
                          
        					<pre class="isprecode"><div class="iscode php">
function acf_rcwdupload_chunks( $chunk, $field ){

    //chunk_size accepts either a size in bytes or a formatted string, e.g: 204800 or&quot;204800b&quot;`` or &quot;200kb&quot;.
    //REMEMBER: don't set the chunk value over the php or wordpress upload limit.
    
    $chunk = '500kb';
    
    return $chunk;
    
}

add_filter( 'acf_rcwdupload_chunks', 'acf_rcwdupload_chunks', 10, 2 );
        					</div></pre><br>
                    	</li>
                    </ul>
                    
                    <hr>

               		<h3 id="jst"><strong>Javascript triggers</strong></h3>

                	<p>These triggers can help you to achieve some results.</p>
                	<ul>
                    	<li><strong>acfrcwdupload_filters</strong><br>
                        	This trigger is called before the upload object is created and pass the file type filters generated by the field settings in backoffice.<br>
                        	You can use this trigger to add a new filter definition call.
        
        					<pre class="isprecode"><div class="iscode javascript">
jQuery(function($){

    $(document).on( "acfrcwdupload_filters", function( event, filters, field_id ) {
    
        filters['your-filter-name'] = 'your-value'; // CHECK THE F.A.Q. SECTION FOR AN EXAMPLE
    
        return filters; // ALWAYS NEEDED!
    
    });
    
});		
        					</div></pre><br>            
                    	</li>
                    	<li><strong>acfrcwdupload_object</strong><br>
                        This trigger is called after the upload object is created.<br>
                        You can use this trigger, for example, to add a new filter (if you do this, don't forget to add the definition call by using the filter acfrcwdupload_filters!).
        
        				<pre class="isprecode"><div class="iscode javascript">
jQuery(function($){

    $(document).on( "acfrcwdupload_object", function( event, field_id ) {
    
        // CHECK THE F.A.Q. SECTION FOR AN EXAMPLE
    
    });
    
});		
        					</div></pre><br>            
                    	</li>            
					</ul>
                    <hr>
                    
                    <h3 id="support"><strong>Support</strong></h3>
        
                    <p>You need support for it? no problem! Send me an email at <a href="mailto:roberto@cantarano.com">roberto@cantarano.com</a>. </p>
                    <p>No support in comments section. Please use it for presale questions only, thanks :)</p>
        
                    <hr>
                    
                    <h3 id="faq"><strong>FAQ</strong></h3>

					<ul>
                        <li>
                            <span class="faqtitle"><strong>I would like to add a custom filter to limit the width of the file that an user can upload.<br>
                            How can i do this?</strong></span><br>
                            Easy! Follow this simple guide:<br>
                            You need 2 JS triggers: 
                            acfrcwdupload_filters and acfrcwdupload_object<br>
                            
                            <pre class="isprecode"><div class="iscode javascript">
$(document).on( "acfrcwdupload_filters", function( event, filters, field_id ) {

    filters['max_width'] = 50; // SET YOUR WIDTH LIMIT, WITHOUT THE WORD PX

    return filters; // DON'T FORGET TO RETURN THE FILTERS!

});
    
$(document).on( "acfrcwdupload_object", function( event, field_id ) {

    plupload.addFileFilter('max_width', function( max_width, file, cb ){
        
        var self	= this
        var img		= new o.Image();
    
        function finalize(result){

            img.destroy();
            
            img = null;
    
            if (!result){
                
                self.trigger('Error', {
                    
                    code 	: plupload.IMAGE_DIMENSIONS_ERROR,
                    message : "The width exceeds the allowed limit of " + max_width  + " pixels.",
                    file 	: file
                    
                });
    
            }
            
            cb(result);
            
        }
    
        img.onload = function() {


            finalize(img.width < max_width);
            
        };
    
        img.onerror = function(){
            
            finalize(false);
            
        };
    
        img.load(file.getSource());
        
    });

});
                            </div></pre>            
                            <br>&nbsp;
                        </li>                    
                    </ul>
                    <hr>


                    <h3 id="updates"><strong>Updates</strong></h3>
        
                    <p>Don't forget to check the checkbox &quot;Get notified by email if this item is updated&quot; in your Downloads page :)</p>
                    <p>To <strong>update</strong> the plugin: <strong>login to CodeCanyon -&gt; Downloads section -&gt; re-download the plugin</strong></p>

                    <p><strong>V1.2.0.5</strong></p>
                    <ul>
                        <li>fixed a bug with upload script file not properly working on some server</li>
                    </ul>
                    
                    <p><strong>V1.2.0.3</strong></p>
                    <ul>
                        <li>Bug fixes for WPML compatibility</li>
                    </ul>
                    
                    <p><strong>V1.2.0.0</strong></p>
                    <ul>
                        <li>Bug fixes for iOS7</li>
                    </ul>
                    
                    <p><strong>V1.1.9.8</strong></p>
                    <ul>
                      <li>Critical update: added various useful staff:</li>
                      <li>preview BEFORE and AFTER upload (with size and crop settings)</li>
                      <li>better fields organization in admin field group settings</li>
                      <li>New JS triggers to customize upload filters (acfrcwdupload_filters and acfrcwdupload_object). See F.A.Q. section</li>
                      <li>Improved code that show the thumb of the uploaded file. Now it happens only if file is image type. Also, the real file path is hidden.</li>
                      <li>Improved code that show the thumb of the preview file. Now it happens only if file is image type.</li>
                      <li>Fixed the rotation problem that happens on some smartphone after upload(for ex. Iphone)</li>
                      <li>Various bug fixes</li>
                    </ul>

                    <p><strong>V1.2.0.2</strong></p>
                    <ul>
                        <li>auto-upgrade process is fixed</li>
                    </ul>
                    <p><strong>V1.1.9.7</strong></p>
                    <ul>
                        <li>Bug fixes</li>
                    </ul>
                    
                    <p><strong>V1.1.9.5</strong></p>
                    <ul>
                        <li>File field value now editable in admin entry page</li>
                        <li>Fixed a critical bug that prevents a second upload on iphone and IE8 (please clear your browser cache)</li>
                    </ul>
                    
                    <p><strong>V1.1.9.1</strong></p>
                    <ul>
                        <li>Fixed a bug that prevents image upload when server does not support exif_read_data function</li>
                    </ul>
                    
                    <p><strong>V1.1.9.0</strong></p>
                    <ul>
                        <li>Fixed a bug that prevents no-image files to be uploaded correctly.</li>
                    </ul>
                                        
                    <p><strong>V1.1.8.8</strong></p>
                    <ul>
                      <li>Various bug fixes.</li>
                    </ul>
                            
                    <p><strong>V1.1.8.4</strong></p>
                    <ul>
                      <li>Various bug fixes.</li>
                    </ul>
                    
                    <p><strong>V1.1.8.3</strong></p>
                    <ul>
                      <li>Fixed a lot of bugs due to new wordpress version compatibility :).</li>
                    </ul>
                    
                    <p><strong>V1.1.7.9</strong></p>
                    <ul>
                      <li>Bug fixes on file preview.</li>
                    </ul>
                    
                    <p><strong>V1.1.7.6</strong></p>
                    <ul>
                      <li>Bug fixes on upload system.</li>
                    </ul>
                    
                    <p><strong>V1.1.7.5</strong></p>
                    <ul>
                      <li>Bug fixes.</li>
                    </ul>
                    
                    <p><strong>V1.1.4</strong></p>
                    <ul>
                      <li>Fixed the "remove" icon, it was using the "add" image.</li>
                    </ul> 
                    
                    <p><strong>V1.1.2</strong></p>
                    <ul>
                      <li>Some settings was not correctly saved.</li>
                    </ul> 
                    
                    <p><strong>V1.1.1</strong></p>
                    <ul>
                      <li>Critical fixes!</li>
                    </ul> 
                    
                    <p><strong>V1.1.0</strong></p>
                    <ul>
                      <li>Now it works with ACF V5!</li>
                    </ul> 
                                
                    <p><strong>V1.0.4</strong></p>
                    <ul>
                      <li>Full support for frontend form (<a href="http://www.advancedcustomfields.com/resources/tutorials/creating-a-front-end-form/" target="_blank">Info here</a>)</li>
                    </ul>            
                    <p><strong>V1.0.2</strong></p>
                    <ul>
                      <li>Fixed styles for jQuery Dialog UI</li>
                      <li>Correct support fot HTTPS (bad WP_CONTENT_URL...bad...)</li>
                      <li>Minor bug fixes</li>
                    </ul>            
                    <p><strong>V1.0.1</strong></p>
                    <ul>
                      <li>improved help file with &quot;how to use&quot;</li>
                      <li>Bug fixes</li>
                    </ul>
                    <p><strong>V1.0</strong></p>
                    <ul>
                      <li>first version</li>
                    </ul>       
         
                    <hr>
                   
                    <h3 id="faq"><strong>FAQ</strong></h3>
                
                    <p>No f.a.q. yet in this first version, sorry.</p>
                    <p>This section will grow with your support! Send me an email at <a href="mailto:roberto@cantarano.com">roberto@cantarano.com</a> with your question and i will help you as soon as possible.</p>
                    
                    <hr>
                
                    <p class="append-bottom alt large"><strong>Roberto Cantarano</strong> - web design and developement</p>
                        
                    <hr class="space">
                        
                </div>
            </div>  
		</div>  
	</div>  
</body>
</html>    